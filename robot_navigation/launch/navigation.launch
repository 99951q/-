<launch>
    <!-- Arguments -->
  <arg name="map_file" default="$(find robot_navigation)/map/map_karto.yaml"/>
  <arg name="simulation" default= "true"/> 
  <arg name="planner"  default="simple" doc="opt: dwa, teb,simple"/> 
  <arg name="use_dijkstra" default= "true"/> 
  <arg name="open_rviz" default="true"/>



  <group unless="$(arg simulation)">
    <!--启动esp32底盘驱动-->
    <include file="$(find chassis_bringup)/launch/bringup.launch" />

    <!--启动YDLIDAR X2雷达驱动-->
    <include file="$(find ydlidar_ros_driver)/launch/X2.launch" /> 
  </group>

  <!-- Map server 启用保存过的地图-->
  <node pkg="map_server" name="map_server" type="map_server" args="$(arg map_file)">
    <param name="frame_id" value="map"/>
  </node>

 <!-- 开启用于导航的自适应蒙特卡洛定位amcl-->  
 <!-- <include file="$(find robot_navigation)/launch/include/amcl.launch" >
    <param name="initial_pose_x"            value="0.4"/>
    <param name="initial_pose_y"            value="0.4"/>
    <param name="initial_pose_a"            value="0.06"/>
 </include> -->

  <node pkg="jie_ware" type="lidar_loc" name="lidar_loc" >
    <param name="base_frame" value="base_link" />
    <param name="odom_frame" value="odom" />
    <param name="laser_frame" value="laser_Link" />
    <param name="laser_topic" value="scan" />
</node>ubantu

    <!-- move_base -->
  <include file="$(find robot_navigation)/launch/move_base.launch" >
    <arg name="planner"            value="$(arg planner)"/>
    <arg name="simulation"            value="$(arg simulation)"/>
    <arg name="use_dijkstra"     value="$(arg use_dijkstra)"/>
  </include>

    <!-- rviz -->
  <group if="$(arg open_rviz)"> 
    <node pkg="rviz" type="rviz" name="rviz" required="true" output="screen"
          args="-d $(find robot_navigation)/rviz/navigation.rviz"/>
  </group>

</launch>



